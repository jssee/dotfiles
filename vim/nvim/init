call plug#begin('~/.config/plug')

Plug 'scrooloose/nerdtree'
Plug 'hail2u/vim-css3-syntax'
Plug 'alexlafroscia/postcss-syntax.vim'
Plug 'pangloss/vim-javascript'
Plug 'mxw/vim-jsx'
Plug 'nightsense/stellarized'
Plug 'itchyny/lightline.vim'
Plug 'mattn/emmet-vim'
Plug 'easymotion/vim-easymotion'
Plug 'ctrlpvim/ctrlp.vim'
Plug 'Raimondi/delimitMate'
Plug 'epilande/vim-es2015-snippets'
Plug 'epilande/vim-react-snippets'
Plug 'Shougo/deoplete.nvim'
Plug 'SirVer/ultisnips'
Plug 'prettier/vim-prettier', {
  \ 'do': 'yarn install',
  \ 'for': ['javascript', 'typescript', 'css', 'less', 'scss', 'json', 'graphql', 'markdown', 'vue'] }

call plug#end()


" Map leader to space
let mapleader = "\<Space>"

" prettier
let g:prettier#autoformat = 0
autocmd BufWritePre *.js,*.jsx,*.mjs,*.ts,*.tsx,*.css,*.less,*.scss,*.json,*.graphql,*.md,*.vue PrettierAsync
let g:prettier#config#bracket_spacing = 'true'

" ctrlp
let g:ctrlp_map = '<leader>o'
let g:ctrlp_user_command = ['.git', 'cd %s && git ls-files . -co --exclude-standard', 'find %s -type f']
let g:ctrlp_custom_ignore = '\v[\/](node_modules|target|dist)|(\.(swp|ico|git|svn))$'

"Snippets and completion
let g:deoplete#enable_at_startup = 1

let g:UltiSnipsExpandTrigger="<tab>"
let g:UltiSnipsJumpForwardTrigger="<c-l>"
let g:UltiSnipsJumpBackwardTrigger="<c-h>"


" Settings
set nocompatible
set encoding=utf-8 nobomb
set mouse=a
set ruler
set number
set tw=100
set formatoptions+=t
set title
set incsearch
set scrolloff=5
set nostartofline
set showcmd
set hidden
set noshowmode
set termguicolors
syntax enable
set t_Co=256

" Backspace shenanigans 
set backspace=indent,eol,start
set modelines=0 

" Search
set incsearch
set ignorecase
set smartcase

" No swap files
set nobackup
set noswapfile
set directory^=$HOME/.vim/tmp//

" Tabs to spaces
set tabstop=2
set softtabstop=2
set shiftwidth=2
set expandtab
set autoindent
set copyindent
filetype indent on    " Enable filetype-specific indenting
filetype plugin on    " Enable filetype-specific plugins

" Remap semicolon to colon
:nmap ; :

" Remap ctrl-c to esc
inoremap <C-c> <Esc><Esc>

" Change cursor depending on mode
let &t_SI = "\<Esc>[6 q"
let &t_SR = "\<Esc>[4 q"
let &t_EI = "\<Esc>[2 q"

" Cylce buffers with tab
:nnoremap <Tab> :bnext<CR>
:nnoremap <S-Tab> :bprevious<CR>

" Open new files in current directory
set autochdir

if strftime('%H') >= 7 && strftime('%H') < 16
  set background=light
  colorscheme stellarized
  let g:lightline = { 'colorscheme': 'stellarized_light' }
else
  set background=dark
  colorscheme stellarized
  let g:lightline = { 'colorscheme': 'stellarized_dark' }
endif

